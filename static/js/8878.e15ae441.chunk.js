"use strict";(self.webpackChunkwaifu=self.webpackChunkwaifu||[]).push([[8878],{48878:(e,t,n)=>{n.d(t,{default:()=>it});const s=e=>e.toString(16).padStart(2,"0"),i=()=>"undefined"!==typeof window?(e=>{const t=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(t),Array.from(t,s).join("")})(10):(new Date).getTime().toString(36);class r{}var a,o;r.makeRequest=(e,t)=>({id:i(),method:e,params:t,env:{sdkVersion:"9.1.0"}}),r.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t}),r.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n}),function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"}(a||(a={})),function(e){e.requestAddressBook="requestAddressBook"}(o||(o={}));const c=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer="undefined"===typeof window,this.isValidMessage=e=>{let{origin:t,data:n,source:s}=e;const i=!n,r=!this.isServer&&s===window.parent,a="undefined"!==typeof n.version&&parseInt(n.version.split(".")[0]),o="number"===typeof a&&a>=1;let c=!0;return Array.isArray(this.allowedOrigins)&&(c=void 0!==this.allowedOrigins.find((e=>e.test(t)))),!i&&r&&o&&c},this.logIncomingMessage=e=>{console.info(`Safe Apps SDK v1: A message was received from origin ${e.origin}. `,e.data)},this.onParentMessage=e=>{this.isValidMessage(e)&&(this.debugMode&&this.logIncomingMessage(e),this.handleIncomingMessage(e.data))},this.handleIncomingMessage=e=>{const{id:t}=e,n=this.callbacks.get(t);n&&(n(e),this.callbacks.delete(t))},this.send=(e,t)=>{const n=r.makeRequest(e,t);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(n,"*"),new Promise(((e,t)=>{this.callbacks.set(n.id,(n=>{n.success?e(n):t(new Error(n.error))}))}))},this.allowedOrigins=e,this.debugMode=t,this.isServer||window.addEventListener("message",this.onParentMessage)}},u=e=>"object"===typeof e&&null!=e&&"domain"in e&&"types"in e&&"message"in e;n(15152);class l{constructor(e){this.communicator=e}async getBySafeTxHash(e){if(!e)throw new Error("Invalid safeTxHash");return(await this.communicator.send(a.getTxBySafeTxHash,{safeTxHash:e})).data}async signMessage(e){const t={message:e};return(await this.communicator.send(a.signMessage,t)).data}async signTypedMessage(e){if(!u(e))throw new Error("Invalid typed data");return(await this.communicator.send(a.signTypedMessage,{typedData:e})).data}async send(e){let{txs:t,params:n}=e;if(!t||!t.length)throw new Error("No transactions were passed");const s={txs:t,params:n};return(await this.communicator.send(a.sendTransactions,s)).data}}const d="eth_call",p="eth_gasPrice",h="eth_getLogs",m="eth_getBalance",f="eth_getCode",g="eth_getBlockByHash",y="eth_getBlockByNumber",b="eth_getStorageAt",v="eth_getTransactionByHash",w="eth_getTransactionReceipt",$="eth_getTransactionCount",x="eth_estimateGas",z="safe_setSettings",S={defaultBlockParam:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:"latest"},returnFullTxObjectParam:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class I{constructor(e){this.communicator=e,this.call=this.buildRequest({call:d,formatters:[null,S.defaultBlockParam]}),this.getBalance=this.buildRequest({call:m,formatters:[null,S.defaultBlockParam]}),this.getCode=this.buildRequest({call:f,formatters:[null,S.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:b,formatters:[null,S.blockNumberToHex,S.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:h}),this.getBlockByHash=this.buildRequest({call:g,formatters:[null,S.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:y,formatters:[S.blockNumberToHex,S.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:v}),this.getTransactionReceipt=this.buildRequest({call:w}),this.getTransactionCount=this.buildRequest({call:$,formatters:[null,S.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:p}),this.getEstimateGas=e=>this.buildRequest({call:x})([e]),this.setSafeSettings=this.buildRequest({call:z})}buildRequest(e){const{call:t,formatters:n}=e;return async e=>{n&&Array.isArray(e)&&n.forEach(((t,n)=>{t&&(e[n]=t(e[n]))}));const s={call:t,params:e||[]};return(await this.communicator.send(a.rpcCall,s)).data}}}function P(e){return"string"===typeof e[0]?A(e):function(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let s=0;for(const i of e)n.set(i,s),s+=i.length;return n}(e)}function A(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}function T(e){let{includeName:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new U(e.type);return`${e.name}(${B(e.inputs,{includeName:t})})`}function B(e){let{includeName:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?e.map((e=>function(e,t){let{includeName:n}=t;if(e.type.startsWith("tuple"))return`(${B(e.components,{includeName:n})})${e.type.slice(5)}`;return e.type+(n&&e.name?` ${e.name}`:"")}(e,{includeName:t}))).join(t?", ":","):""}function E(e){let{strict:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!e&&("string"===typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}function M(e){return E(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const k="2.23.6";let O={getDocsUrl:e=>{let{docsBaseUrl:t,docsPath:n="",docsSlug:s}=e;return n?`${t??"https://viem.sh"}${n}${s?`#${s}`:""}`:void 0},version:`viem@${k}`};class j extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.cause instanceof j?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof j&&t.cause.docsPath||t.docsPath,i=O.getDocsUrl?.({...t,docsPath:s});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...O.version?[`Version: ${O.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=k}walk(e){return C(this,e)}}function C(e,t){return t?.(e)?e:e&&"object"===typeof e&&"cause"in e&&void 0!==e.cause?C(e.cause,t):t?null:e}class N extends j{constructor(e){let{expectedLength:t,givenLength:n,type:s}=e;super([`ABI encoding array length mismatch for type ${s}.`,`Expected length: ${t}`,`Given length: ${n}`].join("\n"),{name:"AbiEncodingArrayLengthMismatchError"})}}class q extends j{constructor(e){let{expectedSize:t,value:n}=e;super(`Size of bytes "${n}" (bytes${M(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class R extends j{constructor(e){let{expectedLength:t,givenLength:n}=e;super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join("\n"),{name:"AbiEncodingLengthMismatchError"})}}class _ extends j{constructor(e){let{docsPath:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionNotFoundError"})}}class H extends j{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${T(e.abiItem)}\`, and`,`\`${t.type}\` in \`${T(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class L extends j{constructor(e){let{expectedSize:t,givenSize:n}=e;super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class D extends j{constructor(e,t){let{docsPath:n}=t;super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:n,name:"InvalidAbiEncodingType"})}}class F extends j{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n"),{name:"InvalidArrayError"})}}class U extends j{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n"),{name:"InvalidDefinitionTypeError"})}}class V extends j{constructor(e){let{address:t}=e;super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class W extends j{constructor(e){let{max:t,min:n,signed:s,size:i,value:r}=e;super(`Number "${r}" is not in safe ${i?`${8*i}-bit ${s?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class G extends j{constructor(e){let{givenSize:t,maxSize:n}=e;super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}class J extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}class K extends j{constructor(e){let{offset:t,position:n,size:s}=e;super(`Slice ${"start"===n?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${s}).`,{name:"SliceOffsetOutOfBoundsError"})}}class X extends j{constructor(e){let{size:t,targetSize:n,type:s}=e;super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Y(e){let{dir:t,size:n=32}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof e?Q(e,{dir:t,size:n}):function(e){let{dir:t,size:n=32}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===n)return e;if(e.length>n)throw new X({size:e.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const r="right"===t;s[r?i:n-i-1]=e[r?i:e.length-i-1]}return s}(e,{dir:t,size:n})}function Q(e){let{dir:t,size:n=32}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===n)return e;const s=e.replace("0x","");if(s.length>2*n)throw new X({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s["right"===t?"padEnd":"padStart"](2*n,"0")}`}function Z(e,t){let{size:n}=t;if(M(e)>n)throw new G({givenSize:M(e),maxSize:n})}const ee=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"===typeof e||"bigint"===typeof e?ie(e,t):"string"===typeof e?ae(e,t):"boolean"===typeof e?ne(e,t):se(e,t)}function ne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=`0x${Number(e)}`;return"number"===typeof t.size?(Z(n,{size:t.size}),Y(n,{size:t.size})):n}function se(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="";for(let i=0;i<e.length;i++)n+=ee[e[i]];const s=`0x${n}`;return"number"===typeof t.size?(Z(s,{size:t.size}),Y(s,{dir:"right",size:t.size})):s}function ie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{signed:n,size:s}=t,i=BigInt(e);let r;s?r=n?(1n<<8n*BigInt(s)-1n)-1n:2n**(8n*BigInt(s))-1n:"number"===typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));const a="bigint"===typeof r&&n?-r-1n:0;if(r&&i>r||i<a){const t="bigint"===typeof e?"n":"";throw new W({max:r?`${r}${t}`:void 0,min:`${a}${t}`,signed:n,size:s,value:`${e}${t}`})}const o=`0x${(n&&i<0?(1n<<BigInt(8*s))+BigInt(i):i).toString(16)}`;return s?Y(o,{size:s}):o}const re=new TextEncoder;function ae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return se(re.encode(e),t)}const oe=new TextEncoder;function ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"===typeof e||"bigint"===typeof e?function(e,t){const n=ie(e,t);return de(n)}(e,t):"boolean"===typeof e?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Uint8Array(1);if(n[0]=Number(e),"number"===typeof t.size)return Z(n,{size:t.size}),Y(n,{size:t.size});return n}(e,t):E(e)?de(e,t):pe(e,t)}const ue={zero:48,nine:57,A:65,F:70,a:97,f:102};function le(e){return e>=ue.zero&&e<=ue.nine?e-ue.zero:e>=ue.A&&e<=ue.F?e-(ue.A-10):e>=ue.a&&e<=ue.f?e-(ue.a-10):void 0}function de(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;t.size&&(Z(n,{size:t.size}),n=Y(n,{dir:"right",size:t.size}));let s=n.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,r=new Uint8Array(i);for(let a=0,o=0;a<i;a++){const e=le(s.charCodeAt(o++)),t=le(s.charCodeAt(o++));if(void 0===e||void 0===t)throw new j(`Invalid byte sequence ("${s[o-2]}${s[o-1]}" in "${s}").`);r[a]=16*e+t}return r}function pe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=oe.encode(e);return"number"===typeof t.size?(Z(n,{size:t.size}),Y(n,{dir:"right",size:t.size})):n}var he=n(4874);function me(e,t){const n=t||"hex",s=(0,he.lY)(E(e,{strict:!1})?ce(e):e);return"bytes"===n?s:te(s)}const fe=new J(8192);function ge(e,t){if(fe.has(`${e}.${t}`))return fe.get(`${e}.${t}`);const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),s=me(pe(n),"bytes"),i=(t?n.substring(`${t}0x`.length):n).split("");for(let a=0;a<40;a+=2)s[a>>1]>>4>=8&&i[a]&&(i[a]=i[a].toUpperCase()),(15&s[a>>1])>=8&&i[a+1]&&(i[a+1]=i[a+1].toUpperCase());const r=`0x${i.join("")}`;return fe.set(`${e}.${t}`,r),r}const ye=/^0x[a-fA-F0-9]{40}$/,be=new J(8192);function ve(e,t){const{strict:n=!0}=t??{},s=`${e}.${n}`;if(be.has(s))return be.get(s);const i=!!ye.test(e)&&(e.toLowerCase()===e||!n||ge(e)===e);return be.set(s,i),i}function we(e,t,n){let{strict:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return E(e,{strict:!1})?function(e,t,n){let{strict:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};$e(e,t);const i=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;s&&xe(i,t,n);return i}(e,t,n,{strict:s}):function(e,t,n){let{strict:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};$e(e,t);const i=e.slice(t,n);s&&xe(i,t,n);return i}(e,t,n,{strict:s})}function $e(e,t){if("number"===typeof t&&t>0&&t>M(e)-1)throw new K({offset:t,position:"start",size:M(e)})}function xe(e,t,n){if("number"===typeof t&&"number"===typeof n&&M(e)!==n-t)throw new K({offset:n,position:"end",size:M(e)})}const ze=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Se=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ie(e,t){if(e.length!==t.length)throw new R({expectedLength:e.length,givenLength:t.length});const n=function(e){let{params:t,values:n}=e;const s=[];for(let i=0;i<t.length;i++)s.push(Pe({param:t[i],value:n[i]}));return s}({params:e,values:t}),s=Ae(n);return 0===s.length?"0x":s}function Pe(e){let{param:t,value:n}=e;const s=function(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}(t.type);if(s){const[e,i]=s;return function(e,t){let{length:n,param:s}=t;const i=null===n;if(!Array.isArray(e))throw new F(e);if(!i&&e.length!==n)throw new N({expectedLength:n,givenLength:e.length,type:`${s.type}[${n}]`});let r=!1;const a=[];for(let o=0;o<e.length;o++){const t=Pe({param:s,value:e[o]});t.dynamic&&(r=!0),a.push(t)}if(i||r){const e=Ae(a);if(i){const t=ie(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?P([t,e]):t}}if(r)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:P(a.map((e=>{let{encoded:t}=e;return t})))}}(n,{length:e,param:{...t,type:i}})}if("tuple"===t.type)return function(e,t){let{param:n}=t,s=!1;const i=[];for(let r=0;r<n.components.length;r++){const t=n.components[r],a=Pe({param:t,value:e[Array.isArray(e)?r:t.name]});i.push(a),a.dynamic&&(s=!0)}return{dynamic:s,encoded:s?Ae(i):P(i.map((e=>{let{encoded:t}=e;return t})))}}(n,{param:t});if("address"===t.type)return function(e){if(!ve(e))throw new V({address:e});return{dynamic:!1,encoded:Q(e.toLowerCase())}}(n);if("bool"===t.type)return function(e){if("boolean"!==typeof e)throw new j(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Q(ne(e))}}(n);if(t.type.startsWith("uint")||t.type.startsWith("int")){const e=t.type.startsWith("int"),[,,s="256"]=Se.exec(t.type)??[];return function(e,t){let{signed:n,size:s=256}=t;if("number"===typeof s){const t=2n**(BigInt(s)-(n?1n:0n))-1n,i=n?-t-1n:0n;if(e>t||e<i)throw new W({max:t.toString(),min:i.toString(),signed:n,size:s/8,value:e.toString()})}return{dynamic:!1,encoded:ie(e,{size:32,signed:n})}}(n,{signed:e,size:Number(s)})}if(t.type.startsWith("bytes"))return function(e,t){let{param:n}=t;const[,s]=n.type.split("bytes"),i=M(e);if(!s){let t=e;return i%32!==0&&(t=Q(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:P([Q(ie(i,{size:32})),t])}}if(i!==Number.parseInt(s))throw new q({expectedSize:Number.parseInt(s),value:e});return{dynamic:!1,encoded:Q(e,{dir:"right"})}}(n,{param:t});if("string"===t.type)return function(e){const t=ae(e),n=Math.ceil(M(t)/32),s=[];for(let i=0;i<n;i++)s.push(Q(we(t,32*i,32*(i+1)),{dir:"right"}));return{dynamic:!0,encoded:P([Q(ie(M(t),{size:32})),...s])}}(n);throw new D(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Ae(e){let t=0;for(let r=0;r<e.length;r++){const{dynamic:n,encoded:s}=e[r];t+=n?32:M(s)}const n=[],s=[];let i=0;for(let r=0;r<e.length;r++){const{dynamic:a,encoded:o}=e[r];a?(n.push(ie(t+i,{size:32})),s.push(o),i+=M(o)):n.push(o)}return P([...n,...s])}function Te(e){return me(ce(e))}var Be=n(2543);const Ee=e=>function(e){let t=!0,n="",s=0,i="",r=!1;for(let a=0;a<e.length;a++){const o=e[a];if(["(",")",","].includes(o)&&(t=!0),"("===o&&s++,")"===o&&s--,t)if(0!==s)" "!==o?(i+=o,n+=o):","!==e[a-1]&&","!==n&&",("!==n&&(n="",t=!1);else if(" "===o&&["event","function",""].includes(i))i="";else if(i+=o,")"===o){r=!0;break}}if(!r)throw new j("Unable to normalize signature.");return i}("string"===typeof e?e:(0,Be.B)(e));function Me(e){return Te(Ee(e))}const ke=e=>we(Me(e),0,4),Oe=Me;function je(e,t){const n=typeof e,s=t.type;switch(s){case"address":return ve(e,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===s&&"components"in t?Object.values(t.components).every(((t,n)=>je(Object.values(e)[n],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(s)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(s)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(s)&&(Array.isArray(e)&&e.every((e=>je(e,{...t,type:s.replace(/(\[[0-9]{0,}\])$/,"")}))))}}function Ce(e,t,n){for(const s in e){const i=e[s],r=t[s];if("tuple"===i.type&&"tuple"===r.type&&"components"in i&&"components"in r)return Ce(i.components,r.components,n[s]);const a=[i.type,r.type];if(!(!a.includes("address")||!a.includes("bytes20"))||(a.includes("address")&&a.includes("string")||!(!a.includes("address")||!a.includes("bytes")))&&ve(n[s],{strict:!1}))return a}}const Ne="/docs/contract/encodeFunctionData";function qe(e){const{abi:t,args:n,functionName:s}=e;let i=t[0];if(s){const e=function(e){const{abi:t,args:n=[],name:s}=e,i=E(s,{strict:!1}),r=t.filter((e=>i?"function"===e.type?ke(e)===s:"event"===e.type&&Oe(e)===s:"name"in e&&e.name===s));if(0===r.length)return;if(1===r.length)return r[0];let a;for(const o of r)if("inputs"in o)if(n&&0!==n.length){if(o.inputs&&0!==o.inputs.length&&o.inputs.length===n.length&&n.every(((e,t)=>{const n="inputs"in o&&o.inputs[t];return!!n&&je(e,n)}))){if(a&&"inputs"in a&&a.inputs){const e=Ce(o.inputs,a.inputs,n);if(e)throw new H({abiItem:o,type:e[0]},{abiItem:a,type:e[1]})}a=o}}else if(!o.inputs||0===o.inputs.length)return o;return a||r[0]}({abi:t,args:n,name:s});if(!e)throw new _(s,{docsPath:Ne});i=e}if("function"!==i.type)throw new _(void 0,{docsPath:Ne});return{abi:[i],functionName:ke(T(i))}}function Re(e){const{args:t}=e,{abi:n,functionName:s}=1===e.abi.length&&e.functionName?.startsWith("0x")?e:qe(e),i=n[0];return A([s,("inputs"in i&&i.inputs?Ie(i.inputs,t??[]):void 0)??"0x"])}function _e(e,t){return me(function(e){const t="string"===typeof e?ae(e):"string"===typeof e.raw?e.raw:se(e.raw);return P([ae(`\x19Ethereum Signed Message:\n${M(t)}`),t])}(e),t)}class He extends j{constructor(e){let{domain:t}=e;var n,s,i;super(`Invalid domain "${n=t,JSON.stringify(n,((e,t)=>{const n="bigint"===typeof t?t.toString():t;return"function"===typeof s?s(e,n):n}),i)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Le extends j{constructor(e){let{primaryType:t,types:n}=e;super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class De extends j{constructor(e){let{type:t}=e;super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Fe(e){let{domain:t}=e;return["string"===typeof t?.name&&{name:"name",type:"string"},t?.version&&{name:"version",type:"string"},("number"===typeof t?.chainId||"bigint"===typeof t?.chainId)&&{name:"chainId",type:"uint256"},t?.verifyingContract&&{name:"verifyingContract",type:"address"},t?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Ue(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new De({type:e})}function Ve(e){const{domain:t={},message:n,primaryType:s}=e,i={EIP712Domain:Fe({domain:t}),...e.types};!function(e){const{domain:t,message:n,primaryType:s,types:i}=e,r=(e,t)=>{for(const n of e){const{name:e,type:s}=n,a=t[e],o=s.match(Se);if(o&&("number"===typeof a||"bigint"===typeof a)){const[e,t,n]=o;ie(a,{signed:"int"===t,size:Number.parseInt(n)/8})}if("address"===s&&"string"===typeof a&&!ve(a))throw new V({address:a});const c=s.match(ze);if(c){const[e,t]=c;if(t&&M(a)!==Number.parseInt(t))throw new L({expectedSize:Number.parseInt(t),givenSize:M(a)})}const u=i[s];u&&(Ue(s),r(u,a))}};if(i.EIP712Domain&&t){if("object"!==typeof t)throw new He({domain:t});r(i.EIP712Domain,t)}if("EIP712Domain"!==s){if(!i[s])throw new Le({primaryType:s,types:i});r(i[s],n)}}({domain:t,message:n,primaryType:s,types:i});const r=["0x1901"];return t&&r.push(function(e){let{domain:t,types:n}=e;return We({data:t,primaryType:"EIP712Domain",types:n})}({domain:t,types:i})),"EIP712Domain"!==s&&r.push(We({data:n,primaryType:s,types:i})),me(P(r))}function We(e){let{data:t,primaryType:n,types:s}=e;return me(Ge({data:t,primaryType:n,types:s}))}function Ge(e){let{data:t,primaryType:n,types:s}=e;const i=[{type:"bytes32"}],r=[Je({primaryType:n,types:s})];for(const a of s[n]){const[e,n]=Xe({types:s,name:a.name,type:a.type,value:t[a.name]});i.push(e),r.push(n)}return Ie(i,r)}function Je(e){let{primaryType:t,types:n}=e;const s=te(function(e){let{primaryType:t,types:n}=e,s="";const i=Ke({primaryType:t,types:n});i.delete(t);const r=[t,...Array.from(i).sort()];for(const a of r)s+=`${a}(${n[a].map((e=>{let{name:t,type:n}=e;return`${n} ${t}`})).join(",")})`;return s}({primaryType:t,types:n}));return me(s)}function Ke(e){let{primaryType:t,types:n}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;const i=t.match(/^\w*/u),r=i?.[0];if(s.has(r)||void 0===n[r])return s;s.add(r);for(const a of n[r])Ke({primaryType:a.type,types:n},s);return s}function Xe(e){let{types:t,name:n,type:s,value:i}=e;if(void 0!==t[s])return[{type:"bytes32"},me(Ge({data:i,primaryType:s,types:t}))];if("bytes"===s){return i=`0x${(i.length%2?"0":"")+i.slice(2)}`,[{type:"bytes32"},me(i)]}if("string"===s)return[{type:"bytes32"},me(te(i))];if(s.lastIndexOf("]")===s.length-1){const e=s.slice(0,s.lastIndexOf("[")),r=i.map((s=>Xe({name:n,type:e,types:t,value:s})));return[{type:"bytes32"},me(Ie(r.map((e=>{let[t]=e;return t})),r.map((e=>{let[,t]=e;return t}))))]}return[{type:s},i]}const Ye=4001;class Qe extends Error{constructor(e,t,n){super(e),this.code=t,this.data=n,Object.setPrototypeOf(this,Qe.prototype)}}class Ze{constructor(e){this.communicator=e}async getPermissions(){return(await this.communicator.send(a.wallet_getPermissions,void 0)).data}async requestPermissions(e){if(!this.isPermissionRequestValid(e))throw new Qe("Permissions request is invalid",Ye);try{return(await this.communicator.send(a.wallet_requestPermissions,e)).data}catch{throw new Qe("Permissions rejected",Ye)}}isPermissionRequestValid(e){return e.every((e=>"object"===typeof e&&Object.keys(e).every((e=>!!Object.values(o).includes(e)))))}}const et=(e,t)=>t.some((t=>t.parentCapability===e)),tt=()=>(e,t,n)=>{const s=n.value;return n.value=async function(){const e=new Ze(this.communicator);let n=await e.getPermissions();if(et(t,n)||(n=await e.requestPermissions([{[t]:{}}])),!et(t,n))throw new Qe("Permissions rejected",Ye);return s.apply(this)},n};var nt=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};class st{constructor(e){this.communicator=e}async getChainInfo(){return(await this.communicator.send(a.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(a.getSafeInfo,void 0)).data}async experimental_getBalances(){let{currency:e="usd"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await this.communicator.send(a.getSafeBalances,{currency:e})).data}async check1271Signature(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x";const n=await this.getInfo(),s=Re({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,t]}),i={call:d,params:[{to:n.safeAddress,data:s},"latest"]};try{return"0x1626ba7e"===(await this.communicator.send(a.rpcCall,i)).data.slice(0,10).toLowerCase()}catch(r){return!1}}async check1271SignatureBytes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x";const n=await this.getInfo(),s=Re({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,t]}),i={call:d,params:[{to:n.safeAddress,data:s},"latest"]};try{return"0x20c13b0b"===(await this.communicator.send(a.rpcCall,i)).data.slice(0,10).toLowerCase()}catch(r){return!1}}calculateMessageHash(e){return _e(e)}calculateTypedMessageHash(e){const t="object"===typeof e.domain.chainId?e.domain.chainId.toNumber():Number(e.domain.chainId);let n=e.primaryType;if(!n){const t=Object.values(e.types),s=Object.keys(e.types).filter((e=>t.every((t=>t.every((t=>{let{type:n}=t;return n.replace("[","").replace("]","")!==e}))))));if(0===s.length||s.length>1)throw new Error("Please specify primaryType");n=s[0]}return Ve({message:e.message,domain:{...e.domain,chainId:t,verifyingContract:e.domain.verifyingContract,salt:e.domain.salt},types:e.types,primaryType:n})}async getOffChainSignature(e){return(await this.communicator.send(a.getOffChainSignature,e)).data}async isMessageSigned(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x";if("string"===typeof e&&(t=async()=>{const t=this.calculateMessageHash(e);return await this.isMessageHashSigned(t,n)}),u(e)&&(t=async()=>{const t=this.calculateTypedMessageHash(e);return await this.isMessageHashSigned(t,n)}),t){return await t()}throw new Error("Invalid message type")}async isMessageHashSigned(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x";const n=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const s of n){if(await s(e,t))return!0}return!1}async getEnvironmentInfo(){return(await this.communicator.send(a.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(a.requestAddressBook,void 0)).data}}nt([tt()],st.prototype,"requestAddressBook",null);const it=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{allowedDomains:t=null,debug:n=!1}=e;this.communicator=new c(t,n),this.eth=new I(this.communicator),this.txs=new l(this.communicator),this.safe=new st(this.communicator),this.wallet=new Ze(this.communicator)}}}}]);
//# sourceMappingURL=8878.e15ae441.chunk.js.map